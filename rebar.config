%% -*- tab-width: 4;erlang-indent-level: 4;indent-tabs-mode: nil -*-
%% ex: ft=erlang ts=4 sw=4 et

{cover_enabled, true}.
{eunit_opts, [{report,{eunit_surefire,[{dir,"."}]}}]}.
{edoc_opts, [{preprocess, true}]}.
{erl_opts, [debug_info, fail_on_warning]}.

{require_otp_vsn, "R14B04|R15|R16"}.

{deps, [
    %% packaging
    {node_package, ".*", {git, "git://github.com/basho/node_package",
                         {tag, "1.3.8"}}},

    %% erlang oauth module
    {oauth, ".*", {git, "git://github.com/refuge/erlang-oauth.git", {branch,
        "master"}}},

    %% ibrowse module , http client
    {ibrowse, ".*", {git, "git://github.com/refuge/ibrowse.git",
                     {branch, "master"}}},

    %% mochiweb module, http framework
    {mochiweb, ".*", {git,"git://github.com/refuge/mochiweb.git",
                        {branch, "master"}}},

    %% snappy module, used for compression
    {snappy, ".*", {git, "git://github.com/refuge/snappy-erlang.git",
                   {branch, "refuge"}}},

    %% json module, encode/decode module
    {jiffy, ".*", {git, "git://github.com/refuge/jiffy.git", "master"}}
]}.

{lib_dirs, ["apps", "deps"]}.

{sub_dirs, [
    "apps/couch_collate",
    "apps/couch",
    "apps/couch_index",
    "apps/couch_mrview",
    "apps/couch_replicator",
    "apps/couch_plugins",
    "apps/couch_dbupdates",
    "apps/couch_rel",
    "rel"
]}.

{post_hooks, [{compile, "escript support/build_js.escript"}]}.
